# QAOps, или почему тестировщик должен построить CI/CD.
[Описать ужасы написания тестов и бытия тестировщиком]
Всем привет меня зовут Дима и я тестировщик. Писать тесты я начал 12 лет назад, сначала Unit тесты, потом 
performance, e2e, и т.д. Почти все время я оправдывал свое желание писать тесты заботой о качестве продукта.

Все было прекрасно, я менял компании писал тесты, тестовые фреймворки, настраивал Jenkins
пока в один прекрасный момент не обнаружил что вот уже 18 000 е2е тестов, 14 000 Unit тестов, тестовое
окружение насчитывает более 80 сервисов (VM и Docker). 
Мы начали гонять наши тесты паралельно, потом распределенно, потом пошли ретраи!

Тест не упавший 5 раз не упал!

А что если в итоге упадет даже 1-2% тестов, разобрать 360 тестов не так то и просто, как следствие регрессия занимает 2-3 дня!
Так же не следует забывать что готовить окружение для регрессии можно неделями, нет! так больше продолжаться не могло.

> о каком качестве можно говорить если мы ретраим
> о каком качестве можно говорить если регрессия никогда не бывает зеленой?

> Почему CI это выход???

В декабре 2017 года, мы сделали CI и если скажу, что наша жизнь после этого сразу пошла в гору, то обману вас.
Не смотря на все усилия CI оказался никому не нужен!

> CI без CD никому не нужен! Нам нужен CD.

## Вступление
### Что мы хотим
Хотим CD для всех компонентов системы, а не для отдельных проектов и сервисов.
Полностью автоматический процесс от лабов(сотни окружений) до продакшена (десятки окружений).
Наш проект - API платформа, это значит сотни интеграций как внутри, так и снаружи. Также мы ограничены следующими требованиями:
- SLA 99.999%
- Разработчики не допускаются к процессу поставки на PRO
- Разработчики не контролируют процедуру поставки

## Основная часть
### Планирование релизов
- Как быть с зависимостями
- Как понять, что инфраструктура готова и можно деплоить

### Мониторинг
- Post deployment verification
- Как понять, что наш сервис работает

### Rainbow deployment
Rainbow deployment очень похож на Blue/Green, но вместо двух цветов мы можем использовать столько цветов сколько хотим.
Это позволит сделать нашу поставку болеее плавной, а в случае проблем мы затронем меньшее количество пользователей.

### Инструменты
Почему мы откзались от jenkins и перешли на spinnaker?

### CI/CD для CI/CD
Как доставлять инфраструктуру для непрерывной доставки?

## Заключение
### Что получаем?
Такой процесс CD открывает путь к микросервисам и маленьким релизам, что в свою очередь избавляет от огромной регрессии
и flaky тестов. Что повышает качество нашего ПО.
